<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="memberMapper">

<!-- resultMap은 컬럼명이랑 필드명이 달라도 알아서 조회하게 해줌. -->

<select id="loginMember" parameterType="Member" resultMap="memberResultMap">
  SELECT USER_ID 
         ,USER_PWD 
         ,USER_NAME 
         ,EMAIL
         ,GENDER
         ,AGE
         ,PHONE
         ,ADDRESS
         ,ENROLL_DATE 
         ,MODIFY_DATE 
         ,STATUS
  FROM MEMBER
  WHERE USER_ID = #{userId}
  <!-- AND USER_PWD = #{userPwd} --> <!--암호화 처리 후 로그인 기능을 위해 비밀번호 조건 제거 -->
  AND STATUS = 'Y'     
</select>

<insert id="insertMember" parameterType="Member">
   INSERT INTO MEMBER(USER_ID,USER_PWD,USER_NAME,EMAIL,AGE,PHONE,ADDRESS,GENDER)
           VALUES(#{userId},#{userPwd},#{userName},#{email},#{age},#{phone},#{address},#{gender}) 
  
</insert>

<!-- 그런데 resultType으로 하면? 그러면 필드명이랑 같게해줘야함. 하지만 settings mapUnderscoreToCamelCase를 넣는다면? 그럼 상관없음! -->

<select id="loginMember2" parameterType="Member" resultType="Member">
    SELECT USER_ID 
           ,USER_PWD 
           ,USER_NAME 
           ,EMAIL 
           ,GENDER
           ,AGE
           ,PHONE
           ,ADDRESS
           ,ENROLL_DATE 
           ,MODIFY_DATE 
           ,STATUS
     FROM MEMBER
     WHERE USER_ID = #{userId}
     AND USER_PWD = #{userPwd}
     AND STATUS = 'Y'         

</select>

<delete id="deleteMember" parameterType="Member">
   DELETE FROM MEMBER
   WHERE USER_ID = #{userId}

</delete>

<!-- 
<update id="deleteMember" parameterType="string">
   UPDATE MEMBER
   SET STATUS = 'N'
   WHERE USER_ID = #{userId}
</update>

 -->

<!-- USER_ID, USER_PWD, USER_NAME, EMAIL, GENDER, AGE, PHONE, 
ADDRESS, ENROLL_DATE, MODIFY_DATE, STATUS-->
<resultMap type="Member" id="memberResultMap">
   <result column="USER_ID" property="userId"></result>
   <result column="USER_PWD" property="userPwd"></result>
   <result column="USER_NAME" property="userName"></result>
   <result column="EMAIL" property="email"></result>
   <result column="GENDER" property="gender"></result>
   <result column="AGE" property="age"></result>
   <result column="PHONE" property="phone"></result>
   <result column="ADDRESS" property="address"></result>
   <result column="ENROLL_DATE" property="enrollDate"></result>
   <result column="MODIFY_DATE" property="modifyDate"></result>
   <result column="STATUS" property="status"></result>

</resultMap>

</mapper>  