package com.kh.spring.board.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

import com.kh.spring.board.model.service.BoardService;

@Controller
public class BoardListController {
	
	@Autowired
	private BoardService service;
	
	@RequestMapping("/list.bo")
	public String boardListView(@RequestParam int currentPage) {
		
		//가지고 있는 총 게시글 개수
		int listCount = service.listCount(); // 이거 데이터베이스에서 COUNT(*) 참고
		
		//한 페이지에서 보여질 개수(글이 16개라 5개로 지정)
		int boardLimit = 5;
		
		//페이징바를 몇개까지 보여줄지 개수
		//아래 페이징바를 몇개씩 끊어서 보여줄지를 말하는 것.
		int pageLimit = 10; // 어차피 글이 16개고 한 페이지당 5개만 보여줘서 리미트는 10개를 걸었지만 보여지는 페이지수는 4개
		
		//계산 처리시 보여질 끝 페이지 수 (endPage보다 작을 수 있음) 
		int maxPage = 0;
		// 예를 들어서, 페이징바 1개당 볼수있는 게시글 개수가 5개라고 가정..
		// 글을 16개 올렸다고 가정하자. 16개의 글은 페이징바가 4개 까지 필요함. (그럼 이게 maxPage다)
		// 페이징바 리미트를 10개까지 걸었으니 사실 5~10번째는 필요가 없다.
		// 그래서 maxPage로 최대 페이징바 어디까지 나타낼지 파악해야한다.
		// 게시글 개수에 따른 최대 페이지를 어디까지 나타내는가?
		// 마지막 페이지
		
		/*
		 * maxPage는 listCount와 boardLimit의 영향을 받는 수
		 * 
		 * 총 개수 / 보여질 개수
		 * 
		 * 16 / 5 -> 세페이지는 꽉 채우고 마지막 한 페이지는 1개가나옴. 무조건 올림 처리 해야한다. 페이지수는 4개.
		 * 
		 * listCount / boardLimit 를 double 계산 처리 후 올림 처리 (ceil)
		 * 
		 * 좀 더 쉽게 말하면 게시글 개수에 따른 최대 페이징 바
		 */
		
		maxPage = (int) Math.ceil((double)listCount/boardLimit);
		
		//페이징 처리시 보여질 시작 페이지 수
		
		
		
	
		return "board/boardListView"; 
	}

}
